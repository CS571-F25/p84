{
  "lexicon": 1,
  "id": "com.deckbelcher.richtext",
  "defs": {
    "main": {
      "type": "object",
      "properties": {
        "text": {
          "type": "string",
          "maxLength": 500000,
          "maxGraphemes": 50000,
          "description": "The plain text content (no markdown symbols)."
        },
        "facets": {
          "type": "array",
          "items": {
            "type": "ref",
            "ref": "com.deckbelcher.richtext.facet"
          },
          "description": "Annotations of text (mentions, URLs, hashtags, formatting, etc)."
        }
      },
      "description": "A single paragraph of rich text with optional facet annotations.\nUsed for descriptions and other short formatted text."
    },
    "document": {
      "type": "object",
      "properties": {
        "content": {
          "type": "array",
          "items": {
            "type": "union",
            "refs": [
              "#paragraphBlock",
              "#headingBlock",
              "#codeBlock",
              "#bulletListBlock",
              "#orderedListBlock",
              "#horizontalRuleBlock"
            ]
          },
          "description": "Array of blocks (paragraphs, headings, etc)."
        }
      },
      "description": "A multi-block rich text document.\nUsed for primers and other long-form content.",
      "required": [
        "content"
      ]
    },
    "paragraphBlock": {
      "type": "object",
      "properties": {
        "text": {
          "type": "string",
          "maxLength": 500000,
          "maxGraphemes": 50000,
          "description": "The plain text content (no markdown symbols)."
        },
        "facets": {
          "type": "array",
          "items": {
            "type": "ref",
            "ref": "com.deckbelcher.richtext.facet"
          },
          "description": "Annotations of text (formatting, mentions, links, etc)."
        }
      },
      "description": "A paragraph block with text and optional facets."
    },
    "headingBlock": {
      "type": "object",
      "properties": {
        "level": {
          "type": "integer",
          "minimum": 1,
          "maximum": 6,
          "description": "Heading level (1-6)."
        },
        "text": {
          "type": "string",
          "maxLength": 10000,
          "maxGraphemes": 1000,
          "description": "The plain text content (no markdown symbols)."
        },
        "facets": {
          "type": "array",
          "items": {
            "type": "ref",
            "ref": "com.deckbelcher.richtext.facet"
          },
          "description": "Annotations of text (formatting, mentions, links, etc)."
        }
      },
      "description": "A heading block with level, text, and optional facets.",
      "required": [
        "level"
      ]
    },
    "codeBlock": {
      "type": "object",
      "properties": {
        "text": {
          "type": "string",
          "maxLength": 100000,
          "description": "The code content (plain text, no facets)."
        },
        "language": {
          "type": "string",
          "maxLength": 50,
          "description": "Optional language identifier for syntax highlighting."
        }
      },
      "description": "A code block with optional language hint.",
      "required": [
        "text"
      ]
    },
    "bulletListBlock": {
      "type": "object",
      "properties": {
        "items": {
          "type": "array",
          "items": {
            "type": "ref",
            "ref": "#listItem"
          },
          "description": "The list items."
        }
      },
      "description": "An unordered (bullet) list.",
      "required": [
        "items"
      ]
    },
    "listItem": {
      "type": "object",
      "properties": {
        "text": {
          "type": "string",
          "maxLength": 100000,
          "maxGraphemes": 10000,
          "description": "The plain text content (no markdown symbols)."
        },
        "facets": {
          "type": "array",
          "items": {
            "type": "ref",
            "ref": "com.deckbelcher.richtext.facet"
          },
          "description": "Annotations of text (formatting, mentions, links, etc)."
        },
        "sublist": {
          "type": "union",
          "refs": [
            "#bulletListBlock",
            "#orderedListBlock"
          ],
          "description": "Optional nested sublist (bullet or ordered)."
        }
      },
      "description": "A single list item with text, optional facets, and optional sublist."
    },
    "orderedListBlock": {
      "type": "object",
      "properties": {
        "items": {
          "type": "array",
          "items": {
            "type": "ref",
            "ref": "#listItem"
          },
          "description": "The list items."
        },
        "start": {
          "type": "integer",
          "description": "Starting number (default 1)."
        }
      },
      "description": "An ordered (numbered) list.",
      "required": [
        "items"
      ]
    },
    "horizontalRuleBlock": {
      "type": "object",
      "properties": {},
      "description": "A horizontal rule (thematic break)."
    }
  }
}
